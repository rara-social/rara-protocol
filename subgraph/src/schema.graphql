type User @entity {
  id: ID! #publicAddress
  makerRewardsBalance: BigDecimal!
  creatorRewardsBalance: BigDecimal!
  referrerRewardsBalance: BigDecimal!
}

type UserReaction @entity {
  id: ID! #msg.sender + event.params.metaId.toHexString()
  user: User!
  reaction: Reaction!
  quantity: BigInt!
}

type Reaction @entity {
  id: ID! #event.params.metaId.toHexString()
  metaId: String!
  makerUser: User!
  nftChainId: BigInt!
  nftContractAddress: Bytes!
  nftId: BigInt!
  nftOwnerAddress: Bytes!
  nftCreatorAddress: Bytes!
  reactionPrice: BigDecimal!
  registered: Boolean!
  totalSold: BigInt!
  makerFeesTotal: BigDecimal!
  creatorFeesTotal: BigDecimal!
  referrerFeesTotal: BigDecimal!
}

type TakerNFT @entity {
  id: ID! #curatorShareTokenId
  nftChainId: BigInt!
  nftContractAddress: Bytes!
  nftId: BigInt!
  takerShareCount: BigInt
  curatorShareCount: BigInt! #number of shares
  curatorShareBalance: BigDecimal! #payment token balance
  referrerFeesBalance: BigDecimal!
}

type CuratorReaction @entity {
  id: ID! #event.transaction.hash.toHex() + "-" + event.logIndex.toString()
  reaction: Reaction!
  takerNFT: TakerNFT!
  quantity: BigInt!
  curator: User!
  metadataHash: BigInt
}

type CuratorPosition @entity {
  id: ID! #msg.sender + takerNft.id
  takerNFT: TakerNFT!
  shareCount: BigInt!
  curator: User!
  isTakerShares: Boolean
}
